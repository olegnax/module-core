<script type="text/javascript">!function(){function t(){this.settings={src:"data-original",srcset:"data-originalset",selector:".lazy",selectorClass:"lazy",loadClass:"lazy-loader",loadEvent:"lazyLoaded.oxlazy",root:null,rootMargin:"0px",threshold:0,debouncer:500},this.images=document.querySelectorAll(this.settings.selector),this.observer=null;let t=this;this.load=(e=>{let s=e.target,o=s.parentElement;if(s.src==s.getAttribute(this.settings.src)){s.classList.remove(t.settings.selectorClass),o.classList.remove(t.settings.loadClass);let e=o.closest(".product-item-photo");e&&e.classList.remove(t.settings.loadClass),s.dispatchEvent(new Event(t.settings.loadEvent)),this.observer&&this.observer.unobserve(s)}}),this.destroy=(()=>{this.observer.disconnect()}),this.oldLoadImages=(()=>{if(!this.settings)return;let e=function(t,e){var s;return function(){var o=this,i=arguments;clearTimeout(s),s=setTimeout(function(){t.apply(o,Array.prototype.slice.call(i))},e)}};window.addEventListener("scroll",e(t.oldInit,t.settings.debouncer)),window.addEventListener("resize",e(t.oldInit,t.settings.debouncer)),t.oldInit()}),this.oldInit=(()=>{let e=window.visualViewport?window.visualViewport.height:window.innerHeight;Array.prototype.forEach.call(this.images,function(s){if(s.classList.contains(t.settings.selectorClass)){let o=s.getBoundingClientRect();o.top!=o.bottom&&0<o.bottom&&e>o.top&&t.applyImage(s)}})}),this.applyImage=(e=>{let s=e.getAttribute(t.settings.src),o=e.getAttribute(t.settings.srcset);"img"===e.tagName.toLowerCase()?(e.onload=t.load,s&&(e.src=s),o&&(e.srcset=o)):e.style.backgroundImage="url('"+s+"')"}),this.init=(()=>{window.IntersectionObserver?(this.observer=new IntersectionObserver(function(e,s){Array.prototype.forEach.call(e,function(e){e.isIntersecting&&t.applyImage(e.target)})},{root:this.settings.root,rootMargin:this.settings.rootMargin,threshold:[this.settings.threshold]}),Array.prototype.forEach.call(this.images,function(e){t.observer.observe(e)})):this.oldLoadImages()}),this.init()}window.lazyLoad=function(){return new t}}(),document.addEventListener("DOMContentLoaded",function(){lazyLoad()},!1),require(["jquery"],function(t){t(document.body).on("contentUpdated contentUpdated.oxlazy",lazyLoad)});</script>